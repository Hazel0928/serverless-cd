import{_ as e,d as r,e as t,j as o,K as i,i as n,R as a,v as l,P as s,o as p,C as f,f as m,A as c,z as u}from"./index.js";import{a as d,N as g}from"./index8.js";import{a as h,b}from"./index7.js";var v,y;function x(e){var r={};return Object.keys(e).forEach((function(t){void 0!==e[t]&&(r[t]=e[t])})),r}function C(e){e.preventDefault()}var _=function e(r,t){var o=t.size,i=t.device,n=t.labelAlign,s=t.labelTextAlign,f=t.labelCol,m=t.wrapperCol,c=t.responsive,u=t.colon;return a.Children.map(r,(function(r){if(l.isReactFragment(r))return e(r.props.children,t);if(r&&["function","object"].indexOf(p(r.type))>-1&&"form_item"===r.type._typeMark){var d={labelCol:r.props.labelCol?r.props.labelCol:f,wrapperCol:r.props.wrapperCol?r.props.wrapperCol:m,labelAlign:r.props.labelAlign?r.props.labelAlign:"phone"===i?"top":n,labelTextAlign:r.props.labelTextAlign?r.props.labelTextAlign:s,colon:"colon"in r.props?r.props.colon:u,size:r.props.size?r.props.size:o,responsive:c};return a.cloneElement(r,x(d))}return r}))},F=(y=v=function(s){function p(e){r(this,p);var n=t(this,s.call(this,e));if(n.onChange=function(e,r){n.props.onChange(n._formField.getValues(),{name:e,value:r,field:n._formField})},n._formField=null,!1!==e.field){var a=o({},e.fieldOptions,{onChange:n.onChange});if(e.field){n._formField=e.field;var l=n._formField.options.onChange;a.onChange=i.makeChain(l,n.onChange),n._formField.setOptions&&n._formField.setOptions(a)}else"value"in e&&(a.values=e.value),n._formField=new d(n,a);e.locale&&e.locale.Validate&&n._formField.setOptions({messages:e.locale.Validate}),e.saveField(n._formField)}return n}return e(p,s),p.prototype.getChildContext=function e(){return{_formField:this.props.field?this.props.field:this._formField,_formSize:this.props.size,_formDisabled:this.props.disabled,_formPreview:this.props.isPreview,_formFullWidth:this.props.fullWidth,_formLabelForErrorMessage:this.props.useLabelForErrorMessage}},p.prototype.componentDidUpdate=function e(r){var t=this.props;this._formField&&("value"in t&&t.value!==r.value&&this._formField.setValues(t.value),"error"in t&&t.error!==r.error&&this._formField.setValues(t.error))},p.prototype.render=function e(){var r,t=this.props,i=t.className,s=t.inline,f=t.size;t.device,t.labelAlign,t.labelTextAlign;var m=t.onSubmit,c=t.children;t.labelCol,t.wrapperCol;var u=t.style,d=t.prefix,g=t.rtl,b=t.isPreview,v=t.component,y=t.responsive,x=t.gap;t.colon;var C=n(((r={})[d+"form"]=!0,r[d+"inline"]=s,r[""+d+f]=f,r[d+"form-responsive-grid"]=y,r[d+"form-preview"]=b,r[i]=!!i,r)),F=_(c,this.props);return a.createElement(v,o({role:"grid"},l.pickOthers(p.propTypes,this.props),{className:C,style:u,dir:g?"rtl":void 0,onSubmit:m}),y?a.createElement(h,{gap:x},F):F)},p}(a.Component),v.propTypes={prefix:s.string,inline:s.bool,size:s.oneOf(["large","medium","small"]),fullWidth:s.bool,labelAlign:s.oneOf(["top","left","inset"]),labelTextAlign:s.oneOf(["left","right"]),field:s.any,saveField:s.func,labelCol:s.object,wrapperCol:s.object,onSubmit:s.func,children:s.any,className:s.string,style:s.object,value:s.object,onChange:s.func,component:s.oneOfType([s.string,s.func]),fieldOptions:s.object,rtl:s.bool,device:s.oneOf(["phone","tablet","desktop"]),responsive:s.bool,isPreview:s.bool,useLabelForErrorMessage:s.bool,colon:s.bool,disabled:s.bool,gap:s.oneOfType([s.arrayOf(s.number),s.number])},v.defaultProps={prefix:"next-",onSubmit:C,size:"medium",labelAlign:"left",onChange:i.noop,component:"form",saveField:i.noop,device:"desktop",colon:!1,disabled:!1},v.childContextTypes={_formField:s.object,_formSize:s.string,_formDisabled:s.bool,_formPreview:s.bool,_formFullWidth:s.bool,_formLabelForErrorMessage:s.bool},y),O,T;F.displayName="Form";var w=(T=O=function(i){function l(){var e,o,n;r(this,l);for(var a=arguments.length,s=Array(a),p=0;p<a;p++)s[p]=arguments[p];return e=o=t(this,i.call.apply(i,[this].concat(s))),o.itemRender=function(e){return e.length?e:null},t(o,n=e)}return e(l,i),l.prototype.render=function e(){var r,t=this.props,i=t.children,l=t.name,s=t.prefix,p=t.style,f=t.className,c=t.field,u=m(t,["children","name","prefix","style","className","field"]);if(i&&"function"!=typeof i)return a.createElement("div",{className:s+"form-item-help"},i);var d=this.context._formField||c;if(!d||!l)return null;var g="string"==typeof l,h=g?[l]:l,b=[];if(h.length){var v=d.getErrors(h);Object.keys(v).forEach((function(e){v[e]&&b.push(v[e])}))}var y=null;if(!(y="function"==typeof i?i(b,g?d.getState(l):void 0):this.itemRender(b)))return null;var x=n(((r={})[s+"form-item-help"]=!0,r[f]=f,r));return a.createElement("div",o({},u,{className:x,style:p}),y)},l}(a.Component),O.propTypes={name:s.oneOfType([s.string,s.array]),field:s.object,style:s.object,className:s.string,children:s.oneOfType([s.node,s.func]),prefix:s.string},O.defaultProps={prefix:"next-"},O.contextTypes={_formField:s.object},O._typeMark="form_error",T);w.displayName="Error";var N=f.config(w),E,k;function j(e,r){if(r in e)return e[r]}function L(e,r){var t;return(t={})[e]=r[e],t.message=j(r,e+"Message"),t.trigger=j(r,e+"Trigger"),t}function S(e,r){if(e.valueName)return e.valueName;if("string"==typeof r){var t=r.replace(/Config\(/g,"").replace(/\)/g,"");if(-1!==["Switch","Checkbox","Radio"].indexOf(t))return"checked"}return"value"}function A(e,r){var t=[];e.required&&t.push(L("required",e));var o=Number(e.maxLength),i=Number(e.minLength);(i||o)&&t.push({minLength:i,maxLength:o,message:j(e,"minmaxLengthMessage")||j(e,"minLengthMessage")||j(e,"maxLengthMessage"),trigger:j(e,"minmaxLengthTrigger")||j(e,"minLengthTrigger")||j(e,"maxLengthTrigger")}),e.length&&t.push(L("length",e)),e.pattern&&t.push(L("pattern",e)),["number","tel","url","email"].indexOf(e.format)>-1&&t.push(L("format",e));var n=Number(e.max),a=Number(e.min);return(n||a)&&t.push({min:a,max:n,message:j(e,"minmaxMessage")||j(e,"minMessage")||j(e,"maxMessage"),trigger:j(e,"minmaxTrigger")||j(e,"minTrigger")||j(e,"maxTrigger")}),e.validator&&"function"==typeof e.validator&&t.push({validator:e.validator,trigger:j(e,"validatorTrigger")}),r&&t.forEach((function(e){e.aliasName=r})),t}function M(e,r,t){return{valueName:S(e,r),trigger:e.trigger?e.trigger:"onChange",autoValidate:e.autoValidate,rules:A(e,t)}}var P=g.Row,W=g.Col,z=h.Cell,I=l.isNil,R=(k=E=function(i){function s(){return r(this,s),t(this,i.apply(this,arguments))}return e(s,i),s.prototype.getNames=function e(r){var t=this.props.name,o,i=a.Children.toArray(r).filter((function(e){return e.props&&("name"in e.props||"data-meta"in e.props)})).map((function(e){return e.props.name||e.props.id}));return i.length?i:t?[t]:[]},s.prototype.getHelper=function e(r){var t=this.props.help,o=this.context._formField;return a.createElement(N,{name:void 0===t?this.getNames(r):void 0,field:o},t)},s.prototype.getState=function e(r){var t=this.props.validateState;if(t)return t;if(this.context._formField){var o=this.context._formField.getState,i=this.getNames(r);return i.length?o(i[0]):""}},s.prototype.getSize=function e(){return this.props.size||this.context._formSize},s.prototype.getDisabled=function e(){return"disabled"in this.props?this.props.disabled:this.context._formDisabled},s.prototype.getIsPreview=function e(){return"isPreview"in this.props?this.props.isPreview:this.context._formPreview},s.prototype.getFullWidth=function e(){return I(this.props.fullWidth)?!!this.context._formFullWidth:this.props.fullWidth},s.prototype.getLabelForErrorMessage=function e(){var r=this.props.label,t;return r&&"string"==typeof r?(r=r.replace(":","").replace("\uff1a",""),("useLabelForErrorMessage"in this.props?this.props.useLabelForErrorMessage:this.context._formLabelForErrorMessage)&&r?r:null):null},s.prototype.getItemLabel=function e(r){var t,i=this.props,l=i.id,s=i.required,p=i.asterisk,f=void 0===p?s:p,m=i.label,c=i.labelCol,u=i.wrapperCol,d=i.prefix,g=i.responsive,h=i.labelWidth,b=i.labelTextAlign,v=i.colon,y=this.getLabelAlign(this.props.labelAlign,this.props.device);if(!m)return null;var x=a.createElement("label",{htmlFor:l||this.getNames(r)[0],required:f,key:"label"},m),C=n(((t={})[d+"form-item-label"]=!0,t["has-colon"]=v,t[d+"left"]="left"===b,t));return g&&h&&"top"!==y?a.createElement("div",{className:C,style:{width:h}},x):(u||c)&&"top"!==y?a.createElement(W,o({},c,{className:C}),x):a.createElement("div",{className:C},x)},s.prototype.getItemWrapper=function e(r){var t=this,i=this.props,n=i.hasFeedback,l=i.labelCol,s=i.wrapperCol,f=i.extra,m=i.prefix,c=i.renderPreview,u=i.name,d=this.getLabelAlign(this.props.labelAlign,this.props.device),g=this.getState(r),h=this.getIsPreview(),b={size:this.getSize()};h&&(b.isPreview=!0),"renderPreview"in this.props&&"function"==typeof c&&(b.renderPreview=c),g&&("error"===g||n)&&(b.state=g),"inset"===d&&(b.label=this.getItemLabel(r)),this.getDisabled()&&(b.disabled=!0);var v=this.getLabelForErrorMessage(),y=a.Children.map(r,(function(e,r){if(e&&["function","object"].indexOf(p(e.type))>-1&&"form_item"!==e.type._typeMark&&"form_error"!==e.type._typeMark){var i=b;if(t.context._formField&&!("data-meta"in e.props)&&("name"in e.props||u&&0===r)){var n="name"in e.props&&e.props.name?e.props.name:u;i=t.context._formField.init(n,o({},M(t.props,e.type.displayName,v),{props:o({},e.props,{ref:e.ref})}),b)}else i=o({},e.props,i);return a.cloneElement(e,i)}return e})),x=this.getHelper(r);return(s||l)&&"top"!==d?a.createElement(W,o({},s,{className:m+"form-item-control",key:"item"}),y," ",x," ",f):a.createElement("div",{className:m+"form-item-control"},y," ",x," ",f)},s.prototype.getLabelAlign=function e(r,t){return"phone"===t?"top":r},s.prototype.render=function e(){var r,t=this.props,i=t.className,p=t.style,f=t.prefix,m=t.wrapperCol,c=t.labelCol,u=t.responsive,d=t.children,g=this.getLabelAlign(this.props.labelAlign,this.props.device),h=d;"function"==typeof d&&this.context._formField&&(h=d(this.context._formField.getValues()));var b=this.getState(h),v=this.getSize(),y=this.getFullWidth(),x=this.getIsPreview(),C=n(((r={})[f+"form-item"]=!0,r[""+f+g]=g,r["has-"+b]=!!b,r[""+f+v]=!!v,r[f+"form-item-fullwidth"]=y,r[""+i]=!!i,r[f+"form-preview"]=x,r)),_=u?z:(m||c)&&"top"!==g?P:"div",F="inset"===g?null:this.getItemLabel(h);return a.createElement(_,o({},l.pickOthers(s.propTypes,this.props),{className:C,style:p}),F,this.getItemWrapper(h))},s}(a.Component),E.propTypes={prefix:s.string,rtl:s.bool,label:s.node,labelCol:s.object,wrapperCol:s.object,help:s.node,name:s.string,extra:s.node,validateState:s.oneOf(["error","success","loading","warning"]),hasFeedback:s.bool,style:s.object,id:s.string,children:s.oneOfType([s.node,s.func]),size:s.oneOf(["large","small","medium"]),fullWidth:s.bool,labelAlign:s.oneOf(["top","left","inset"]),labelTextAlign:s.oneOf(["left","right"]),className:s.string,required:s.bool,asterisk:s.bool,requiredMessage:s.string,requiredTrigger:s.oneOfType([s.string,s.array]),min:s.number,max:s.number,minmaxMessage:s.string,minmaxTrigger:s.oneOfType([s.string,s.array]),minLength:s.number,maxLength:s.number,minmaxLengthMessage:s.string,minmaxLengthTrigger:s.oneOfType([s.string,s.array]),length:s.number,lengthMessage:s.string,lengthTrigger:s.oneOfType([s.string,s.array]),pattern:s.any,patternMessage:s.string,patternTrigger:s.oneOfType([s.string,s.array]),format:s.oneOf(["number","email","url","tel"]),formatMessage:s.string,formatTrigger:s.oneOfType([s.string,s.array]),validator:s.func,validatorTrigger:s.oneOfType([s.string,s.array]),autoValidate:s.bool,device:s.oneOf(["phone","tablet","desktop"]),responsive:s.bool,colSpan:s.number,labelWidth:s.oneOfType([s.string,s.number]),isPreview:s.bool,renderPreview:s.func,useLabelForErrorMessage:s.bool,colon:s.bool,disabled:s.bool,valueName:s.string},E.defaultProps={prefix:"next-",hasFeedback:!1,labelWidth:100},E.contextTypes={_formField:s.object,_formSize:s.oneOf(["large","small","medium"]),_formDisabled:s.bool,_formPreview:s.bool,_formFullWidth:s.bool,_formLabelForErrorMessage:s.bool},E._typeMark="form_item",k),V,D;R.displayName="Item";var q=(D=V=function(i){function n(){var e,o,a;r(this,n);for(var l=arguments.length,s=Array(l),p=0;p<l;p++)s[p]=arguments[p];return e=o=t(this,i.call.apply(i,[this].concat(s))),o.handleClick=function(){var e=o.props,r=e.onClick,t=e.validate,i=o.context._formField||o.props.field;i?!0===t?i.validate((function(e){r(i.getValues(),e,i)})):Array.isArray(t)?i.validate(t,(function(e){r(i.getValues(),e,i)})):r(i.getValues(),null,i):r()},t(o,a=e)}return e(n,i),n.prototype.render=function e(){var r=this.props.children;return a.createElement(b,o({},l.pickOthers(n.propTypes,this.props),{onClick:this.handleClick}),r)},n}(a.Component),V.propTypes={onClick:s.func,validate:s.oneOfType([s.bool,s.array]),field:s.object,children:s.node},V.defaultProps={onClick:i.noop},V.contextTypes={_formField:s.object},D);q.displayName="Submit";var B=q,H,$,K=($=H=function(i){function n(){var e,o,a;r(this,n);for(var l=arguments.length,s=Array(l),p=0;p<l;p++)s[p]=arguments[p];return e=o=t(this,i.call.apply(i,[this].concat(s))),o.handleClick=function(){var e=o.props,r=e.names,t=e.toDefault,i=e.onClick,n=o.context._formField||o.props.field;n?(t?n.resetToDefault(r):n.reset(r),i()):i()},t(o,a=e)}return e(n,i),n.prototype.render=function e(){var r=this.props.children;return a.createElement(b,o({},l.pickOthers(n.propTypes,this.props),{onClick:this.handleClick}),r)},n}(a.Component),H.propTypes={names:s.array,onClick:s.func,toDefault:s.bool,field:s.object,children:s.node},H.defaultProps={onClick:i.noop},H.contextTypes={_formField:s.object},$);K.displayName="Reset";var U=K;F.Item=f.config(R,{transform:function e(r,t){if("validateStatus"in r){t("validateStatus","validateState","Form.Item");var i=r,n=i.validateStatus,a=m(i,["validateStatus"]);r=o({validateState:n},a)}return r}}),F.Submit=B,F.Reset=U,F.Error=N;var G=f.config(F,{transform:function e(r,t){if("direction"in r){t("direction","inline","Form");var i=r,n=i.direction,a=m(i,["direction"]);"hoz"===n&&(r=o({inline:!0},a))}return r}}),J=function(){return J=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},J.apply(this,arguments)},Q=/^[\u4e00-\u9fa5]{2,3}$/,X=/^[\u4e00-\u9fa5]{4}$/,Y=Q.test.bind(Q),Z=X.test.bind(X),ee,re=function(e){var r=a.forwardRef((function(r,t){var o,i,l=r.children,s=r.className,p=c("--alicloudfe-components-theme").trim();return"wind"!==p&&!p.startsWith("xconsole")&&"string"==typeof l&&Y(l)?a.createElement(e,J({},r,{className:n("isTwoToThreeCNCharBtn",s),ref:t}),l):"wind"!==p&&!p.startsWith("xconsole")&&"string"==typeof l&&Z(l)?a.createElement(e,J({},r,{className:n("isFourCNCharBtn",s),ref:t}),l):1===a.Children.count(l)&&"Config(Icon)"===(null===(i=null===(o=l)||void 0===o?void 0:o.type)||void 0===i?void 0:i.displayName)?a.createElement(e,J({},r,{className:n("isOnlyIcon",s),ref:t}),l):a.createElement(e,J({},r,{className:s,ref:t}),l)}));return u(r,e),r},te=function(){return te=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},te.apply(this,arguments)},oe=function(e,r){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(t[o[i]]=e[o[i]]);return t},ie=a.forwardRef((function(e,r){e.labelWidth;var t=oe(e,["labelWidth"]),o=c("--alicloudfe-components-theme").trim();return"wind"===o||o.startsWith("xconsole")||o.startsWith("hybridcloud")||o.startsWith("yunxiao")?a.createElement(G,te({labelTextAlign:"left"},t,{ref:r})):a.createElement(G,te({},t,{ref:r}))}));u(ie,G),ie.Submit=re(ie.Submit),ie.Reset=re(ie.Reset);var ne=ie;export{ne as F};
