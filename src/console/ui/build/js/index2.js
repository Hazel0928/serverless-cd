import{u as e,l as t,R as a,h as s,L as r,a as n,r as l,b as i}from"./index.js";import{l as o}from"./Trigger.js";import{P as m}from"./index3.js";import{S as c,a as p}from"./DeployStatus.js";import{C as d,a as x}from"./index4.js";import{B as g}from"./index6.js";import{N as u}from"./index5.js";import{B as E}from"./index7.js";import{N as f}from"./index8.js";import"./index12.js";import"./task.js";import"./index9.js";import"./index11.js";import"./Secret.js";import"./index10.js";var h="";const y=({name:e,owner:t})=>a.createElement("div",{className:"text-nowrap-1",style:{minWidth:180}},a.createElement("span",{className:"avatar-content",style:{display:"inline-block",fontSize:12,marginRight:10}},"C D"),a.createElement("span",{className:"fz-12"},t),a.createElement("span",{className:"fz-14 f-w-500"}," / ",e)),j=({item:r})=>{const n=e(),l=t.exports.get(r,"repo_name",""),i=t.exports.get(r,"id",""),o=t.exports.get(r,"owner",""),m=t.exports.get(r,"description",""),p=t.exports.get(r,"updated_time",""),x=t.exports.get(r,"latest_task.message",""),u=t.exports.get(r,"latest_task.status","init"),E=()=>{n.push(`/application/${i}/detail`)};return a.createElement("div",{style:{position:"relative"}},a.createElement(d,{free:!0,showHeadDivider:!0,className:"project-card cursor-pointer",onClick:E},a.createElement(d.Header,{title:a.createElement(y,{name:l,owner:o})}),a.createElement(d.Content,{style:{height:40,paddingBottom:0}},a.createElement("span",{className:"text-nowrap-1"},x),a.createElement("p",{className:"text-nowrap-1",style:{margin:"5px 0"}},m)),a.createElement(d.Actions,null,a.createElement(g,{spacing:10,direction:"row",style:{alignItems:"center",justifyContent:"space-between"}},a.createElement("div",{className:"flex-r"},a.createElement("span",{className:"mr-8"},s(p).format("YYYY-MM-DD HH:mm:ss")),"github"===r.provider&&a.createElement("svg",{"aria-label":"github",height:"15",viewBox:"0 0 14 14",width:"20"},a.createElement("path",{d:"M7 .175c-3.872 0-7 3.128-7 7 0 3.084 2.013 5.71 4.79 6.65.35.066.482-.153.482-.328v-1.181c-1.947.415-2.363-.941-2.363-.941-.328-.81-.787-1.028-.787-1.028-.634-.438.044-.416.044-.416.7.044 1.071.722 1.071.722.635 1.072 1.641.766 2.035.59.066-.459.24-.765.437-.94-1.553-.175-3.193-.787-3.193-3.456 0-.766.262-1.378.721-1.881-.065-.175-.306-.897.066-1.86 0 0 .59-.197 1.925.722a6.754 6.754 0 0 1 1.75-.24c.59 0 1.203.087 1.75.24 1.335-.897 1.925-.722 1.925-.722.372.963.131 1.685.066 1.86.46.48.722 1.115.722 1.88 0 2.691-1.641 3.282-3.194 3.457.24.219.481.634.481 1.29v1.926c0 .197.131.415.481.328C11.988 12.884 14 10.259 14 7.175c0-3.872-3.128-7-7-7z",fill:"currentColor"}))),u&&a.createElement(c,{status:u})))))};var v="";const w=({queryKey:e})=>a.createElement("div",{className:"project-not-app p-48 flex-c mt-20",style:{justifyContent:"center",alignItems:"center"}},a.createElement("p",{style:{fontWeight:500,lineHeight:"20px"}},"\u6ca1\u6709\u641c\u7d22\u5230\u5e94\u7528"),a.createElement("p",{style:{color:"#444",marginTop:8}},'\u60a8\u641c\u7d22\u5173\u952e\u5b57"',e,'"\u6682\u672a\u53d1\u73b0\u5e94\u7528'),a.createElement(r,{to:"/create",className:"mt-16 fz-14"},"\u521b\u5efa\u5e94\u7528")),{Row:N,Col:C}=f,b=undefined,k=()=>{const{data:e,request:s,cancel:r}=n(o,{pollingInterval:5e3}),[c,d]=l.exports.useState([]),[f,h]=l.exports.useState(!1),[y,v]=l.exports.useState([]),[b,k]=l.exports.useState("");l.exports.useEffect((()=>{h(!0),s()}),[]),l.exports.useEffect((()=>{if(e)if(h(!1),(null==e?void 0:e.length)>0){const a=t.exports.filter(e,(e=>t.exports.get(e,"latest_task.completed",!1)));t.exports.isEmpty(a)&&r(),d(e),v(e)}else r()}),[e]);const S=e=>{k(e),y.length>0&&d(t.exports.filter(y,(a=>t.exports.includes(a.repo_name,e))))},z=t.exports.debounce(S,250,{maxWait:1e3}),_=()=>{var e;null==(e=i)||e.push("/create")};return a.createElement(m,{breadcrumbs:[{name:"\u5e94\u7528\u5217\u8868"}],hideBackground:!0},f?a.createElement(u,{visible:f,style:{width:"100%"}}):e&&e.length>0?a.createElement(a.Fragment,null,a.createElement(g,{spacing:10,direction:"row"},a.createElement(p,{size:"large",shape:"simple",placeholder:"Search",onChange:z,style:{flex:1}}),a.createElement(E,{size:"large",type:"primary",onClick:_},"\u521b\u5efa\u5e94\u7528")),c.length>0?a.createElement(N,{wrap:!0,className:"mt-24",gutter:24},t.exports.map(c,(e=>a.createElement(C,{span:"6",className:"applist-col"},a.createElement(j,{key:e.providerUid,item:e}))))):a.createElement(w,{queryKey:b})):a.createElement(x,null))};export{k as default};
